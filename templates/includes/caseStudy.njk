{% from 'img.macro.njk' import img %}

<div class="pb-80 m:pb-115 l:pb-150" data-component="caseStudy">
  <div
    class="h-screen overflow-hidden js-hero"
    data-theme="{{ p.heroNavTextColor }}"
  >
    {{ img(
      asset = p.heroImageDesktop.asset,
      alt = p.heroImageDesktop.alt,
      cx = 'hidden m:block relative w-full h-full'
    ) }}
    {{ img(
      asset = p.heroImageMobile.asset,
      alt = p.heroImageMobile.alt,
      cx = 'm:hidden relative w-full h-full'
    ) }}
  </div>
  <div class="m:grid grid-template pt-40 s:pt-60 m:pt-80 l:pt-100 pb-80 m:pb-115 l:pb-150 px">
    <h1 class="col-start-3 col-span-7 font-nm text-30 xs:text-36 s:text-45 m:text-55 l:text-65 leading-115 mb-20 m:mb-30 l:mb-40">
      {{ p.title }}
    </h1>
    <div class="col-start-4 col-span-6 px-30 m:px-0 mb-40 m:mb-0">
      {{ p.introText | blocksToHtml('editorialText') | safe }}
    </div>
    <dl class="col-start-11 col-span-2 m:pt-18 text-16 m:text-18 l:text-20 leading-115 tracking-[0.01em] px-30 m:px-0">
      {% if p.client %}
        <dt class="text-gray-dark mb-6">Client</dt>
        <dd class="mb-20 m:mb-25 l:mb-30">{{ p.client }}</dd>
      {% endif %}
      {% if p.collaborators %}
        <dt class="text-gray-dark mb-6">Collaborators</dt>
        <dd class="mb-20 m:mb-25 l:mb-30">{{ p.collaborators }}</dd>
      {% endif %}
      {% if p.location %}
        <dt class="text-gray-dark mb-6">Location</dt>
        <dd class="mb-20 m:mb-25 l:mb-30">{{ p.location }}</dd>
      {% endif %}
      {% if p.taxonomies.list | length %}
        <dt class="text-gray-dark mb-6">{{ p.taxonomies.title }}</dt>
        <dd class="mb-20 m:mb-25 l:mb-30">
          <ul class="space-y-6">
            {% for tax in p.taxonomies.list %}
              {% if tax._type == 'collection' and tax.items | length %}
                <li>
                  <a href="/collections/{{ tax.slug }}">
                    {{ tax.title }}
                  </a>
                </li>
              {% else %}
                <li>{{ tax.title }}</li>
              {% endif  %}
            {% endfor %}
          </ul>
        </dd>
      {% endif %}
      {% if p.year %}
        <dt class="text-gray-dark mb-6">Year</dt>
        <dd>{{ p.year }}</dd>
      {% endif %}
    </dl>
  </div>
  {% for module in p.modules %}
    {% set type = module._type %}
    {% set moduleTemplate %}
      {% include type + '.njk' ignore missing %}
    {% endset %}
    {% if moduleTemplate | trim | length %}
      {{ moduleTemplate | safe }}
    {% else %}
      <p class="text-40 my-100 text text-muted-light">{{ type }}<p>
    {% endif %}
  {% endfor %}
  {% if p.related.posts | length %}
    {% include 'related.njk' %}
  {% endif %}
</div>